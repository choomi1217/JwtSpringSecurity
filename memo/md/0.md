# ...  ë§í•¨
ë”°ë¼ ë°°ìš°ë ¤ë˜ ê°•ì˜ê°€ ì „ë¶€ Deprecated ë¨..

ê·¸ë˜ì„œ 
[ìŠ¤í”„ë§ ë¬¸ì„œ](https://spring.io/guides/gs/securing-web/)
ì°¸ê³ í•˜ê¸°ë¡œ í•¨ ğŸ˜‚ğŸ˜‚ğŸ˜‚

# ... ë§í•¨2
[ìŠ¤í”„ë§ ë¬¸ì„œ](https://spring.io/guides/gs/securing-web/) ì´ê±° ì°¸ê³ í•˜ë ¤ê³  í–ˆëŠ”ë°..
ì•„ë˜ `antMatchers`ë¼ëŠ”ê²Œ ìê¾¸ ì•ˆ ë¨
```java
.authorizeHttpRequests((requests) -> requests
    .antMatchers("/", "/home").permitAll()
    .anyRequest().authenticated()
```

ê·¸ë˜ì„œ antMatchersë„ ì•ˆ ë˜ëŠ”ê±´ê°€ ì‹¶ì–´ì„œ HttpSecurity javadocì„ ìì„¸íˆ ì½ê¸° ì‹œì‘í•¨.

---

RequestMatcher êµ¬í˜„(ì˜ˆ: URL íŒ¨í„´ì„ í†µí•´)ì„ ì‚¬ìš©í•˜ì—¬ HttpServletRequest ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì•¡ì„¸ìŠ¤ë¥¼ ì œí•œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì˜ˆì‹œ êµ¬ì„±
ê°€ì¥ ê¸°ë³¸ì ì¸ ì˜ˆëŠ” "ROLE_USER" ì—­í• ì„ ìš”êµ¬í•˜ë„ë¡ ëª¨ë“  URLì„ êµ¬ì„±í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì•„ë˜ êµ¬ì„±ì—ì„œëŠ” ëª¨ë“  URLì— ëŒ€í•œ ì¸ì¦ì´ í•„ìš”í•˜ë©° ì‚¬ìš©ì "admin" ë° "user" ëª¨ë‘ì—ê²Œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤.
@Configuration
@EnableWebSecurity
public class AuthorizeUrlsSecurityConfig {

  	@Bean
  	public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
  		http
  			.authorizeHttpRequests((authorizeHttpRequests) ->
  				authorizeHttpRequests
  					.requestMatchers("/**").hasRole("USER")
  			)
  			.formLogin(withDefaults());
  		return http.build();
  	}
 
  	@Bean
  	public UserDetailsService userDetailsService() {
  		UserDetails user = User.withDefaultPasswordEncoder()
  			.username("user")
  			.password("password")
  			.roles("USER")
  			.build();
  		UserDetails admin = User.withDefaultPasswordEncoder()
  			.username("admin")
  			.password("password")
  			.roles("ADMIN", "USER")
  			.build();
  		return new InMemoryUserDetailsManager(user, admin);
  	}
}

ì—¬ëŸ¬ URLì„ êµ¬ì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ êµ¬ì„±ì—ì„œëŠ” ëª¨ë“  URLì— ëŒ€í•œ ì¸ì¦ì´ í•„ìš”í•˜ë©° "admin" ì‚¬ìš©ìì—ê²Œë§Œ /admin/ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” URLì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ ê¶Œí•œì„ ë¶€ì—¬í•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ ëª¨ë“  URL.
@Configuration
@EnableWebSecurity
public class AuthorizeUrlsSecurityConfig {

  	@Bean
  	public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
  		http
  			.authorizeHttpRequests((authorizeHttpRequests) ->
  				authorizeHttpRequests
  					.requestMatchers("/admin/**").hasRole("ADMIN")
  					.requestMatchers("/**").hasRole("USER")
  			)
  			.formLogin(withDefaults());
  		return http.build();
  	}
 
  	@Bean
  	public UserDetailsService userDetailsService() {
  		UserDetails user = User.withDefaultPasswordEncoder()
  			.username("user")
  			.password("password")
  			.roles("USER")
  			.build();
  		UserDetails admin = User.withDefaultPasswordEncoder()
  			.username("admin")
  			.password("password")
  			.roles("ADMIN", "USER")
  			.build();
  		return new InMemoryUserDetailsManager(user, admin);
  	}
}

ë§¤ì²˜ëŠ” ìˆœì„œëŒ€ë¡œ ê³ ë ¤ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ì²« ë²ˆì§¸ ë§¤ì²˜ê°€ ëª¨ë“  ìš”ì²­ê³¼ ì¼ì¹˜í•˜ê³  ë‘ ë²ˆì§¸ ë§¤í•‘ì— ë„ë‹¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë‹¤ìŒì€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
@Configuration
@EnableWebSecurity
public class AuthorizeUrlsSecurityConfig {

  	@Bean
  	public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
  		http
  		 	.authorizeHttpRequests((authorizeHttpRequests) ->
  		 		authorizeHttpRequests
  			 		.requestMatchers("/**").hasRole("USER")
  			 		.requestMatchers("/admin/**").hasRole("ADMIN")
  		 	);
  		return http.build();
  	}
}

ë§¤ê°œë³€ìˆ˜:
authorizeHttpRequestsCustomizer â€“ AuthorizeHttpRequestsConfigurer.AuthorizationManagerRequestMatcherRegistry ì— ëŒ€í•œ ì¶”ê°€ ì˜µì…˜ì„ ì œê³µí•˜ëŠ”Customizer í”„ë¡œê·¸ë¨
ë³´ê³ :
ì¶”ê°€ ì‚¬ìš©ì ì§€ì •ì„ ìœ„í•œ HttpSecurity
ë˜ì§€ê¸°:
Exception â€“
ë¶€í„°:
5.5